@inherits LayoutComponentBase
@inject ILocalStorageService LocalStorage
@inject AuthenticationStateProvider AuthenticationStateProvider
@inject NavigationManager NavigationManager

<div class="page">
    <div class="sidebar">
        <NavMenu />
    </div>

    <main>
        <div class="top-row px-4">
             <div class="col-6 col-sm-4 col-md-3 col-lg-auto">
                <Logout ImageUrl="https://tse4-mm.cn.bing.net/th/id/OIP-C.fCI3bS2q9T3_vsKUMchDsAAAAA?w=210&h=210&c=7&r=0&o=5&dpr=1.3&pid=1.7" ShowUserName="false" DisplayName="Administrators" UserName="Admin">
                </Logout>
             </div>
            <Button OnClick="Logout">注销</Button>
        </div>

        <article class="content px-4">
            @Body
        </article>
    </main>
</div>


@code
{
    private async Task Logout()
    {
        await LocalStorage.RemoveItemAsync("authToken");
        await LocalStorage.RemoveItemAsync("phone");
        await AuthenticationStateProvider.GetAuthenticationStateAsync();
        NavigationManager.NavigateTo("login");
    }
}